!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.AffiliatePluginAmazon=o():t.AffiliatePluginAmazon=o()}("undefined"!=typeof self?self:this,function(){return function(t){var o={};function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},e.p="",e(e.s=0)}([function(t,o,e){"use strict";var n=e(1),r=console.log.bind(window,"AMZNPlugin: "),a=console.error.bind(window,"AMZNPlugin: ");t.exports=function(t,o){if((o=n({tags:{us:"",gb:"",de:"",fr:"",jp:"",ca:"",cn:"",it:"",es:"",in:"",br:"",mx:""},debug:!1,locale:null,modifyDomain:!0},o)).debug&&r("Read the docs at https://affiliate.js.org/plugins/amazon"),!o.tags.us)return a("Config must contain a US tag.");var e={us:{tld:"com",la:["en"]},gb:{tld:"co.uk",la:["gd","cy-ie","en-ie"]},de:{tld:"de",la:["de"]},fr:{tld:"fr",la:["fr"]},jp:{tld:"co.jp",la:["jp"]},ca:{tld:"ca",la:[]},cn:{tld:"cn",la:["zh","zh-hk","zh-tw"]},it:{tld:"it",la:["it"]},es:{tld:"es",la:["es"]},in:{tld:"in",la:["hi"]},br:{tld:"com.br",la:[]},mx:{tld:"com.mx",la:[]}};for(var l in e){var i="amazon."+e[l].tld;e[l].hosts=[i,"www."+i]}if(o.locale)o.locale=o.locale.toLowerCase();else{var c=window.navigator.languages.reduce(function(t,o){return t.push(o.toLowerCase()),t},[]);for(var l in c){var s=c[l].split("-")[1];for(var f in e)if(f===s||-1!==e[f].la.indexOf(c[l])){o.locale=f;break}if(o.locale)break}}o.tags[o.locale]||(o.locale="us"),o.debug&&r('Locale set to "'+o.locale+'".');var u=[];for(var l in e)u=u.concat(e[l].hosts);var d={tags:[{hosts:u,query:{tag:o.tags[o.locale]},modifyHost:function(t){var n=0;return"www"===t.substr(0,3)&&(n=1),e[o.locale].hosts[n]}}],log:o.debug};if(!1===o.modifyDomain){d.tags=[];for(var l in o.tags)e[l]&&d.tags.push({hosts:e[l].hosts,query:{tag:o.tags[l]}})}return t(d)}},function(t,o,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t){var o,e;return!(!t||"[object Object]"!=={}.toString.call(t))&&(!(o=Object.getPrototypeOf(t))||"function"==typeof(e={}.hasOwnProperty.call(o,"constructor")&&o.constructor)&&{}.hasOwnProperty.toString.call(e)==={}.hasOwnProperty.toString.call(Object))};t.exports=function t(){var o,e,a,l,i,c,s=arguments[0]||{},f=1,u=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[f]||{},f++),"object"===(void 0===s?"undefined":n(s))||"function"==typeof s&&"number"!=typeof s.nodeType||(s={}),f===u&&(s=this,f--);f<u;f++)if(null!=(o=arguments[f]))for(e in o)a=s[e],s!==(l=o[e])&&(d&&l&&(r(l)||(i=Array.isArray(l)))?(i?(i=!1,c=a&&Array.isArray(a)?a:[]):c=a&&r(a)?a:{},s[e]=t(d,c,l)):void 0!==l&&(s[e]=l));return s}}])});