module.exports=function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t){if("object"===("undefined"==typeof console?"undefined":n(console))){var e=Array.prototype.slice.call(arguments,1),o=t?console.error:console.log;(o=Function.prototype.bind.call(o,console)).apply(console,["[AMZNPlugin] "].concat(e))}};t.exports=function(t,e){var o={tags:{us:"",gb:"",de:"",fr:"",jp:"",ca:"",cn:"",it:"",es:"",in:"",br:"",mx:""},debug:!1,locale:null,modifyDomain:!0};if(e&&e.tags&&(e.tags=r({},o.tags,e.tags)),(e=r({},o,e)).debug&&a(!1,"Read the docs at https://affiliate.js.org/plugins/amazon"),!e.tags.us)return a(!0,"Config must contain a US tag.");var n={us:{tld:"com",la:["en"]},gb:{tld:"co.uk",la:["gd","cy-ie","en-ie"]},de:{tld:"de",la:["de"]},fr:{tld:"fr",la:["fr"]},jp:{tld:"co.jp",la:["jp"]},ca:{tld:"ca",la:[]},cn:{tld:"cn",la:["zh","zh-hk","zh-tw"]},it:{tld:"it",la:["it"]},es:{tld:"es",la:["es"]},in:{tld:"in",la:["hi"]},br:{tld:"com.br",la:[]},mx:{tld:"com.mx",la:[]}};for(var l in n){var i="amazon."+n[l].tld;n[l].hosts=[i,"www."+i]}if(e.locale)e.locale=e.locale.toLowerCase();else{var s=window.navigator.languages.reduce(function(t,e){return t.push(e.toLowerCase()),t},[]);for(var c in s){var u=s[c].split("-")[1];for(var f in n)if(f===u||-1!==n[f].la.indexOf(s[c])){e.locale=f;break}if(e.locale)break}}e.tags[e.locale]||(e.locale="us"),e.debug&&a(!1,'Locale set to "'+e.locale+'".');var d=[];for(var p in n)d=d.concat(n[p].hosts);var g={tags:[{hosts:d,query:{tag:e.tags[e.locale]},modify:function(t){var o=0;return"www"===t.hostname.substr(0,3)&&(o=1),t.set("hostname",n[e.locale].hosts[o]),t}}],log:e.debug};if(!1===e.modifyDomain){g.tags=[];for(var y in e.tags)n[y]&&e.tags[y]&&g.tags.push({hosts:n[y].hosts,query:{tag:e.tags[y]}})}return t(g)}}]);